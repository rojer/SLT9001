author: 'Deomid "rojer" Ryabkov'
description: LED clock firmware
name: clock
version: 0.2.0
platform: esp32
manifest_version: 2020-01-29

libs_version: latest
modules_version: latest
mongoose_os_version: latest

sources:
  - src

filesystem:
  - fs

libs:
  - origin: https://github.com/mongoose-os-libs/bh1750
  - origin: https://github.com/mongoose-os-libs/core
  - origin: https://github.com/mongoose-os-libs/rpc-service-config
  - origin: https://github.com/mongoose-os-libs/rpc-service-fs
  - origin: https://github.com/mongoose-os-libs/rpc-service-i2c
  - origin: https://github.com/mongoose-os-libs/rpc-service-ota
  - origin: https://github.com/mongoose-os-libs/rpc-uart
  - origin: https://github.com/mongoose-os-libs/http-server
  - origin: https://github.com/mongoose-os-libs/ota-http-server
  - origin: https://github.com/mongoose-os-libs/rpc-ws
  - origin: https://github.com/mongoose-os-libs/sntp
  - origin: https://github.com/mongoose-os-libs/wifi

config_schema:
  - ["sntp.enable", true]
  - ["i2c.enable", true]
  - ["i2c.scl_gpio", 33]
  - ["i2c.sda_gpio", 32]
  - ["i2c.freq", 400000]
  - ["bh1750_mtime", "i", 100, {title: "Measurement time for the BH1750"}]
  - ["remote_button_map", "s", "", {title: "Map of remote button code -> button id"}]
  - ["u_rl", "i", 200, {title: "Red"}]
  - ["u_gl", "i", 200, {title: "Green"}]
  - ["u_bl", "i", 200, {title: "Blue"}]
  - ["u_br", "i", 0, {title: "Brightness, 0 = auto or 1 - 100"}]
  - ["auto_br_f", "d", 1.0, {title: "Auto brightness correction factor"}]

cdefs:
  SRCLK_GPIO: 19
  SER_GPIO: 18
  QSER_GPIO: 22
  RCLK_GPIO: 23
  OE_R_GPIO: 21
  OE_G_GPIO: 15
  OE_B_GPIO: 5
  # Buttons, active low
  K1_GPIO: 39
  K2_GPIO: 38
  K3_GPIO: 37
  # IR receiver
  IR_GPIO: 36
  # Reset pin of the light sensor
  DVI_GPIO: 25
  # GPIO to debug display refresh activity
  # DISPLAY_DEBUG_GPIO: 16
